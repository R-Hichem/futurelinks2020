{% extends "layout.html" %} {% block content %}
<h1>{{ current_user.username }}</h1>
<div class="myFiles">
  <h1>Mes Fichiers</h1>
  <div>
    <ul
      style="
        border: 3px solid black;
        border-radius: 5px;
        padding: 25px;
        list-style: none;
        margin: 25px;
      "
    >
      {% if current_user.posts %} {% for post in current_user.posts %}
      <li>
        <div
          style="
            display: flex;
            justify-content: space-around;
            align-items: center;
          "
        >
          <a href="/view_file?filename={{post.title}}"> {{post.title}} </a>
          <p>ajout√© le : {{post.date_posted.strftime('%d-%m-%Y')}}</p>
          <button
            type="button"
            class="btn btn-danger btn-sm m-1"
            data-toggle="modal"
            data-target="#deleteModal__{{post.id}}"
          >
            supprimer
          </button>
          <!-- Modal -->
          <div
            class="modal fade"
            id="deleteModal__{{post.id}}"
            tabindex="-1"
            role="dialog"
            aria-labelledby="deleteModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="deleteModalLabel">
                    Supprimer {{post.title}} ?
                  </h5>
                  <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                  >
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-dismiss="modal"
                  >
                    Annuler
                  </button>
                  <form
                    action="{{ url_for('delete_post', post_id=post.id) }}"
                    method="POST"
                  >
                    <input
                      class="btn btn-danger"
                      type="submit"
                      value="Supprimer"
                    />
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <h2>Vous n'avez aucun fichier pour l'instant !</h2>
    {% endif %}
  </div>
</div>
{% endblock content %}
